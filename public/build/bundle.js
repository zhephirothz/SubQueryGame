var app=function(){"use strict";function t(){}function e(t){return t()}function i(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let n,h;function p(t,e){t.appendChild(e)}function a(t,e,i){t.insertBefore(e,i||null)}function c(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function l(t){return document.createTextNode(t)}function u(){return l(" ")}function f(t,e,i,r){return t.addEventListener(e,i,r),()=>t.removeEventListener(e,i,r)}function m(t,e,i){null==i?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function g(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function x(t,e,i,r){null===i?t.style.removeProperty(e):t.style.setProperty(e,i,r?"important":"")}function b(t){h=t}const P=[],$=[],w=[],y=[],v=Promise.resolve();let S=!1;function k(t){w.push(t)}const _=new Set;let T=0;function O(){const t=h;do{for(;T<P.length;){const t=P[T];T++,b(t),z(t.$$)}for(b(null),P.length=0,T=0;$.length;)$.pop()();for(let t=0;t<w.length;t+=1){const e=w[t];_.has(e)||(_.add(e),e())}w.length=0}while(P.length);for(;y.length;)y.pop()();S=!1,_.clear(),b(t)}function z(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(k)}}const F=new Set;function E(t,e){t&&t.i&&(F.delete(t),t.i(e))}function W(t,e,i,r){if(t&&t.o){if(F.has(t))return;F.add(t),undefined.c.push((()=>{F.delete(t),r&&(i&&t.d(1),r())})),t.o(e)}}function G(t){t&&t.c()}function j(t,i,s,n){const{fragment:h,on_mount:p,on_destroy:a,after_update:c}=t.$$;h&&h.m(i,s),n||k((()=>{const i=p.map(e).filter(o);a?a.push(...i):r(i),t.$$.on_mount=[]})),c.forEach(k)}function C(t,e){const i=t.$$;null!==i.fragment&&(r(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function I(t,e){-1===t.$$.dirty[0]&&(P.push(t),S||(S=!0,v.then(O)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function A(e,o,s,n,p,a,d,l=[-1]){const u=h;b(e);const f=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:p,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(u?u.$$.context:[])),callbacks:i(),dirty:l,skip_bound:!1,root:o.target||u.$$.root};d&&d(f.root);let m=!1;if(f.ctx=s?s(e,o.props||{},((t,i,...r)=>{const o=r.length?r[0]:i;return f.ctx&&p(f.ctx[t],f.ctx[t]=o)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](o),m&&I(e,t)),i})):[],f.update(),m=!0,r(f.before_update),f.fragment=!!n&&n(f.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);f.fragment&&f.fragment.l(t),t.forEach(c)}else f.fragment&&f.fragment.c();o.intro&&E(e.$$.fragment),j(e,o.target,o.anchor,o.customElement),O()}b(u)}class M{$destroy(){C(this,1),this.$destroy=t}$on(t,e){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const t=i.indexOf(e);-1!==t&&i.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}class N{constructor(t=700,e=370,i=50,r=170,o=50,s=300,n=.7,h=1,p=20,a=40,c=40,d=1.5,l=10,u=.3){this.height=t,this.width=e,this.pipeWidth=i,this.pipeGap=r,this.minTopForTopPipe=o,this.maxTopForTopPipe=s,this.generateNewPipePercent=n,this.speed=h,this.groundHeight=p,this.birdX=a,this.birdSize=c,this.gravity=d,this.jumpVelocity=l,this.slowVelocityBy=u,this.velocity=0}newGame(){let t=this.createPipe(!0),e=this.createPipe(!1);return this.frame={firstPipe:t,secondPipe:e,score:0,width:this.width,height:this.height,gameOver:!1,gameStarted:!1,bird:{left:this.birdX,top:this.height/2-this.birdSize/2,size:this.birdSize},ground:{height:this.groundHeight}},this.frame}randomYForTopPipe(){return this.minTopForTopPipe+(this.maxTopForTopPipe-this.minTopForTopPipe)*Math.random()}randomTextForPipe(){const t=["SubQuery","Decentrailised Data","Indexer","Consumer","Delegator","SubQuery Projects","SubQuery SDK","SubQuery Explorer","SubQuery Network","Web3 Infrastructure","Open-source","SubQuery Token","SQT","Pay As You Go","Closed Agreement","Open Agreement","♥Sally♥"];return t[Math.floor(Math.random()*t.length)]}randomGapForPipe(){return Math.floor(26*Math.random())+155}createPipe(t){const e=this.randomYForTopPipe(),i=this.randomTextForPipe();return{topPipe:{top:0,height:e,text:i},bottomPipe:{top:e+this.randomGapForPipe(),height:this.height,text:i},left:this.width-this.pipeWidth,width:this.pipeWidth,show:t}}nextFrame(){return this.frame.gameOver||!this.frame.gameStarted?this.frame:(this.frame.firstPipe=this.movePipe(this.frame.firstPipe,this.frame.secondPipe),this.frame.secondPipe=this.movePipe(this.frame.secondPipe,this.frame.firstPipe),this.frame.bird.top>=this.height-this.groundHeight-this.birdSize?(this.frame.bird.top=this.height-this.groundHeight-this.birdSize,this.frame.gameOver=!0,this.frame):this.hasCollidedWithPipe()?(this.frame.gameOver=!0,this.frame):(this.velocity>0&&(this.velocity-=this.slowVelocityBy),this.frame.firstPipe.left+this.pipeWidth==this.birdX-this.speed&&(this.frame.score+=1),this.frame.secondPipe.left+this.pipeWidth==this.birdX-this.speed&&(this.frame.score+=1),this.frame.bird.top+=Math.pow(this.gravity,2)-this.velocity,this.frame))}start(){return this.newGame(),this.frame.gameStarted=!0,this.frame}movePipe(t,e){return t.show&&t.left<=-1*this.pipeWidth?(t.show=!1,t):(t.show&&(t.left-=this.speed),e.left<this.width*(1-this.generateNewPipePercent)&&e.show&&!t.show?this.createPipe(!0):t)}jump(){this.velocity<=0&&(this.velocity+=this.jumpVelocity),this.frame.gameOver&&this.start()}checkPipe(t){return t<=this.birdX+this.birdSize&&t+this.pipeWidth>=this.birdX}hasCollidedWithPipe(){return this.frame.firstPipe.show&&this.checkPipe(this.frame.firstPipe.left)?!(this.frame.bird.top>this.frame.firstPipe.topPipe.height&&this.frame.bird.top+this.birdSize<this.frame.firstPipe.bottomPipe.top):!(!this.frame.secondPipe.show||!this.checkPipe(this.frame.secondPipe.left))&&!(this.frame.bird.top>this.frame.secondPipe.topPipe.height&&this.frame.bird.top+this.birdSize<this.frame.secondPipe.bottomPipe.top)}}function Q(t){let e,i,r,o,s,n=t[0].topPipe.text+"";return{c(){e=d("section"),i=d("p"),r=l(n),o=u(),s=d("section"),m(i,"class","subquery-info svelte-12cdxwf"),x(e,"Left",t[0].left+"px"),x(e,"top",t[0].topPipe.top+"px"),x(e,"width",t[0].width+"px"),x(e,"height",t[0].topPipe.height+"px"),m(e,"class","top-pipe pipe svelte-12cdxwf"),x(s,"Left",t[0].left+"px"),x(s,"top",t[0].bottomPipe.top+"px"),x(s,"width",t[0].width+"px"),x(s,"height",t[0].bottomPipe.height+"px"),m(s,"class","bottom-pipe pipe svelte-12cdxwf")},m(t,n){a(t,e,n),p(e,i),p(i,r),a(t,o,n),a(t,s,n)},p(t,i){1&i&&n!==(n=t[0].topPipe.text+"")&&g(r,n),1&i&&x(e,"Left",t[0].left+"px"),1&i&&x(e,"top",t[0].topPipe.top+"px"),1&i&&x(e,"width",t[0].width+"px"),1&i&&x(e,"height",t[0].topPipe.height+"px"),1&i&&x(s,"Left",t[0].left+"px"),1&i&&x(s,"top",t[0].bottomPipe.top+"px"),1&i&&x(s,"width",t[0].width+"px"),1&i&&x(s,"height",t[0].bottomPipe.height+"px")},d(t){t&&c(e),t&&c(o),t&&c(s)}}}function L(e){let i,r=e[0].show&&Q(e);return{c(){r&&r.c(),i=l("")},m(t,e){r&&r.m(t,e),a(t,i,e)},p(t,[e]){t[0].show?r?r.p(t,e):(r=Q(t),r.c(),r.m(i.parentNode,i)):r&&(r.d(1),r=null)},i:t,o:t,d(t){r&&r.d(t),t&&c(i)}}}function X(t,e,i){let{pipe:r}=e;return t.$$set=t=>{"pipe"in t&&i(0,r=t.pipe)},[r]}class q extends M{constructor(t){super(),A(this,t,X,L,s,{pipe:0})}}function H(e){let i,r,o;return{c(){var t,s;i=d("section"),r=d("img"),m(r,"alt","subquery-logo"),t=r.src,s=o="images/subquery-logo.png",n||(n=document.createElement("a")),n.href=s,t!==n.href&&m(r,"src","images/subquery-logo.png"),m(r,"width","40px"),m(r,"height","40px"),x(i,"width",e[0].size+"px"),x(i,"height",e[0].size+"px"),x(i,"top",e[0].top+"px"),x(i,"left",e[0].left+"px"),m(i,"id","bird"),m(i,"class","svelte-lih4hw")},m(t,e){a(t,i,e),p(i,r)},p(t,[e]){1&e&&x(i,"width",t[0].size+"px"),1&e&&x(i,"height",t[0].size+"px"),1&e&&x(i,"top",t[0].top+"px"),1&e&&x(i,"left",t[0].left+"px")},i:t,o:t,d(t){t&&c(i)}}}function D(t,e,i){let{bird:r}=e;return t.$$set=t=>{"bird"in t&&i(0,r=t.bird)},[r]}class V extends M{constructor(t){super(),A(this,t,D,H,s,{bird:0})}}function B(t){let e,i,r,o,s,n=t[0].gameOver&&Y(t);return{c(){e=d("section"),n&&n.c(),i=u(),r=d("button"),r.textContent="Start Game",m(r,"class","svelte-oxk57d"),m(e,"id","init-screen"),m(e,"class","svelte-oxk57d")},m(h,c){a(h,e,c),n&&n.m(e,null),p(e,i),p(e,r),o||(s=f(r,"click",t[3]),o=!0)},p(t,r){t[0].gameOver?n?n.p(t,r):(n=Y(t),n.c(),n.m(e,i)):n&&(n.d(1),n=null)},d(t){t&&c(e),n&&n.d(),o=!1,s()}}}function Y(t){let e,i,r,o,s,n,h,f,x,b=t[0].score+"";return{c(){e=d("h2"),e.textContent="Game Over",i=u(),r=d("h2"),o=l("Score "),s=l(b),n=u(),h=d("h2"),f=l("Highest Score "),x=l(t[1]),m(e,"class","game-over svelte-oxk57d"),m(r,"class","game-over svelte-oxk57d"),m(h,"class","game-over svelte-oxk57d")},m(t,c){a(t,e,c),a(t,i,c),a(t,r,c),p(r,o),p(r,s),a(t,n,c),a(t,h,c),p(h,f),p(h,x)},p(t,e){1&e&&b!==(b=t[0].score+"")&&g(s,b),2&e&&g(x,t[1])},d(t){t&&c(e),t&&c(i),t&&c(r),t&&c(n),t&&c(h)}}}function K(t){let e,i,o,s,n,h,b,P,$,w,y,v,S,k,_,T=t[0].score+"";n=new V({props:{bird:t[0].bird}}),b=new q({props:{pipe:t[0].firstPipe}}),$=new q({props:{pipe:t[0].secondPipe}});let O=(t[0].gameOver||!t[0].gameStarted)&&B(t);return{c(){e=d("main"),i=d("section"),o=l(T),s=u(),G(n.$$.fragment),h=u(),G(b.$$.fragment),P=u(),G($.$$.fragment),w=u(),O&&O.c(),y=u(),v=d("section"),m(i,"id","score"),m(i,"class","svelte-oxk57d"),x(v,"height",t[0].ground.height+"px"),m(v,"id","ground"),m(v,"class","svelte-oxk57d"),x(e,"width",t[0].width+"px"),x(e,"height",t[0].height+"px"),m(e,"class","game svelte-oxk57d")},m(r,c){a(r,e,c),p(e,i),p(i,o),p(e,s),j(n,e,null),p(e,h),j(b,e,null),p(e,P),j($,e,null),p(e,w),O&&O.m(e,null),p(e,y),p(e,v),S=!0,k||(_=[f(window,"click",t[2]),f(window,"keydown",t[2]),f(window,"touchstart",t[2])],k=!0)},p(t,[i]){(!S||1&i)&&T!==(T=t[0].score+"")&&g(o,T);const r={};1&i&&(r.bird=t[0].bird),n.$set(r);const s={};1&i&&(s.pipe=t[0].firstPipe),b.$set(s);const h={};1&i&&(h.pipe=t[0].secondPipe),$.$set(h),t[0].gameOver||!t[0].gameStarted?O?O.p(t,i):(O=B(t),O.c(),O.m(e,y)):O&&(O.d(1),O=null),(!S||1&i)&&x(v,"height",t[0].ground.height+"px"),(!S||1&i)&&x(e,"width",t[0].width+"px"),(!S||1&i)&&x(e,"height",t[0].height+"px")},i(t){S||(E(n.$$.fragment,t),E(b.$$.fragment,t),E($.$$.fragment,t),S=!0)},o(t){W(n.$$.fragment,t),W(b.$$.fragment,t),W($.$$.fragment,t),S=!1},d(t){t&&c(e),C(n),C(b),C($),O&&O.d(),k=!1,r(_)}}}function J(t,e,i){const r=new N;let o=r.newGame(),s=localStorage.getItem("highestScore")||"0";return localStorage.setItem("highestScore",s),setInterval((()=>{i(0,o=r.nextFrame()),i(1,s=localStorage.getItem("highestScore")),o.score>parseInt(s)&&localStorage.setItem("highestScore",o.score.toString())}),1e3/90),[o,s,function(){r.jump()},function(){i(0,o=r.start())}]}class R extends M{constructor(t){super(),A(this,t,J,K,s,{})}}function U(e){let i,r;return i=new R({}),{c(){G(i.$$.fragment)},m(t,e){j(i,t,e),r=!0},p:t,i(t){r||(E(i.$$.fragment,t),r=!0)},o(t){W(i.$$.fragment,t),r=!1},d(t){C(i,t)}}}return new class extends M{constructor(t){super(),A(this,t,null,U,s,{})}}({target:document.body,props:{name:"world"}})}();
